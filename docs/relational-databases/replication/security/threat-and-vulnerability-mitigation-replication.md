---
title: 脅威と脆弱性の対策 (レプリケーション) | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql
ms.prod_service: database-engine
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
author: MashaMSFT
ms.author: mathoma
monikerRange: =azuresqldb-mi-current||>=sql-server-2014||=sqlallproducts-allversions
ms.openlocfilehash: bed0d5388b2a7639fa57d61d96d384ec8bf8c13d
ms.sourcegitcommit: 8732161f26a93de3aa1fb13495e8a6a71519c155
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/01/2019
ms.locfileid: "71710753"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a>脅威と脆弱性の対策 (レプリケーション)
[!INCLUDE[appliesto-ss-asdbmi-xxxx-xxx-md](../../../includes/appliesto-ss-asdbmi-xxxx-xxx-md.md)]
  このトピックでは、レプリケーション トポロジに対する脅威を軽減する方法について説明します。  
  
## <a name="encryption"></a>暗号化  
 暗号化とは、想定されている相手以外はデータを解読できないように、特殊なキーがないと解読できない形式にデータを変換するプロセスです。 レプリケーションでは、テーブルに格納されるデータやネットワーク接続で送信されるデータの暗号化は行われません。 これは、トランスポート レベルで暗号化を行うさまざまな技術があるからです。たとえば、仮想プライベート ネットワーク (VPN)、Secure Sockets Layer (SSL)、IP セキュリティ (IPSEC) などの業界標準技術があります。 レプリケーション トポロジのコンピューター間の接続は、これらの方法を使用して暗号化することをお勧めします。 詳細については、「[データベース エンジンへの暗号化接続の有効化 &#40;SQL Server 構成マネージャー&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)」を参照してください。 VPN と SSL を使用したインターネット経由のデータのレプリケーションについては、「 [Securing Replication Over the Internet](../../../relational-databases/replication/security/securing-replication-over-the-internet.md)」を参照してください。  
  
 SSL を使用してレプリケーション トポロジのコンピューター間の接続をセキュリティで保護する場合、各レプリケーション エージェントの **-EncryptionLevel** パラメーターに値 **1** または **2** を指定します (値 **2** が推奨値です)。 値 **1** は、暗号化を使用していますが、SSL サーバー証明書が信頼されている発行者によって署名されていることをエージェントが検証していないことを示します。値 **2** は、証明書が検証されていることを示します。 エージェント パラメーターは、エージェント プロファイルおよびコマンド ラインで指定できます。 詳細については、以下をご覧ください。  
  
-   [レプリケーション エージェント プロファイルの操作](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
-   [レプリケーション エージェント コマンド プロンプト パラメーターを表示および変更する &#40;SQL Server Management Studio&#41;](../../../relational-databases/replication/agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [Replication Agent Executables Concepts](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 以下では、データベースのマスター キーに関連するレプリケーションの動作について説明します。マスター キーはデータの暗号化に使用されます。  
  
-   レプリケーションに関係するデータベース (パブリケーション データベース、サブスクリプション データベース、またはディストリビューション データベース) にマスター キーがある場合、そのデータベースのエージェント パスワードの暗号化および暗号化解除には、 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] データベースの対称キーが使用されます。 マスター キーを使用する場合は、レプリケーションに関係する各データベースでマスター キーを作成する必要があります。 マスター キーの作成の詳細については、「[CREATE MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/create-master-key-transact-sql.md)」を参照してください。  
  
-   レプリケーションでは、マスター キーはレプリケートされません。 サブスクライバーでマスター キーが必要な場合は、BACKUP MASTER KEY を使用してパブリケーション データベースからエクスポートし、RESTORE MASTER KEY を使用してサブスクリプション データベースにインポートする必要があります。 詳細については、「[BACKUP MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/backup-master-key-transact-sql.md)」と「[RESTORE MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/restore-master-key-transact-sql.md)」を参照してください。  
  
-   アタッチ可能なサブスクリプション データベースに対してマスター キーが定義されている場合は、[sp_attachsubscription &#40;Transact-SQL&#41;](../../../relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql.md) の `@db_master_key_password` パラメーターを使用してマスター キーのパスワードを指定します。 これにより、サブスクライバーでそのデータベースをアタッチできます。  
  
 暗号化とマスター キーの詳細については、「 [Encryption Hierarchy](../../../relational-databases/security/encryption/encryption-hierarchy.md)」を参照してください。  
  
 レプリケーションでは、暗号化された列データをパブリッシュできます。 このデータの暗号化を解除してサブスクライバーで使用するには、パブリッシャーでのデータの暗号化に使用されたキーがサブスクライバーにも存在する必要があります。 レプリケーションでは、暗号化キーを送信する安全なメカニズムは提供されません。 このため、暗号化キーはサブスクライバーで手動で再作成する必要があります。 詳細については、「[Replicate Data in Encrypted Columns &#40;SQL Server Management Studio&#41;](../../../relational-databases/replication/security/replicate-data-in-encrypted-columns-sql-server-management-studio.md)」 (暗号化された列のデータをレプリケートする &#40;SQL Server Management Studio&#41;) を参照してください。  
  
## <a name="see-also"></a>参照  
 [ID およびアクセス制御 (レプリケーション)](../../../relational-databases/replication/security/identity-and-access-control-replication.md)   
 [レプリケーションのセキュリティ設定の表示および変更](../../../relational-databases/replication/security/view-and-modify-replication-security-settings.md)   

  
  
