---
description: DB2 スキーマの変換 (DB2ToSQL)
title: DB2 スキーマの変換 (DB2ToSQL) |Microsoft Docs
ms.prod: sql
ms.custom: ''
ms.date: 01/19/2017
ms.reviewer: ''
ms.technology: ssma
ms.topic: conceptual
ms.assetid: 7947efc3-ca86-4ec5-87ce-7603059c75a0
author: nahk-ivanov
ms.author: alexiva
ms.openlocfilehash: 9dbf89c8027737a02d4eded9dc2e743e683b65e4
ms.sourcegitcommit: e700497f962e4c2274df16d9e651059b42ff1a10
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/17/2020
ms.locfileid: "88418558"
---
# <a name="converting-db2-schemas-db2tosql"></a>DB2 スキーマの変換 (DB2ToSQL)
DB2 に接続し、に接続して、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] プロジェクトとデータのマッピングオプションを設定したら、db2 データベースオブジェクトを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベースオブジェクトに変換できます。  
  
## <a name="the-conversion-process"></a>変換処理  
データベースオブジェクトを変換すると、DB2 からオブジェクトの定義が取得され、類似のオブジェクトに変換され [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] て、SSMA メタデータに読み込まれます。 のインスタンスに情報は読み込まれません [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。 その後、メタデータエクスプローラーを使用して、オブジェクトとそのプロパティを表示でき [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ます。  
  
変換中に SSMA は出力メッセージを出力ウィンドウに出力し、エラーメッセージをエラー一覧ウィンドウに出力します。 出力とエラーの情報を使用して、必要な変換結果を取得するために DB2 データベースまたは変換プロセスを変更する必要があるかどうかを判断します。  
  
## <a name="setting-conversion-options"></a>変換オプションの設定  
オブジェクトを変換する前に、[ **プロジェクトの設定** ] ダイアログボックスでプロジェクトの変換オプションを確認してください。 このダイアログボックスを使用すると、SSMA が関数とグローバル変数を変換する方法を設定できます。 詳細については、「 [プロジェクトの設定 &#40;変換&#41; &#40;DB2ToSQL&#41;](../../ssma/db2/project-settings-conversion-db2tosql.md)」を参照してください。  
  
## <a name="conversion-results"></a>変換結果  
次の表は、変換される DB2 オブジェクトと、結果として得られるオブジェクトを示してい [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ます。  
  
|DB2 オブジェクト|結果の SQL Server オブジェクト|  
|-----------|----------------------------|  
|データ型|**SSMA は、次の一覧を除くすべての型をマップします。**<br /><br />CLOB: この型を操作するための一部のネイティブ関数はサポートされていません (例: CLOB_EMPTY ())<br /><br />BLOB: この型を使用する一部のネイティブ関数はサポートされていません (例: BLOB_EMPTY ())<br /><br />DBLOB: この型を操作するための一部のネイティブ関数はサポートされていません (例: DBLOB_EMPTY ())|  
|ユーザー定義型|**SSMA は、次のユーザー定義をマップします。**<br /><br />Distinct 型<br /><br />構造化型<br /><br />SQL PL データ型-注意: 弱いカーソルの種類はサポートされていません。|  
|特別なレジスタ|**SSMA は、以下に示すレジスタのみをマップします。**<br /><br />現在のタイムスタンプ<br /><br />現在の日付<br /><br />現在の時刻<br /><br />現在のタイムゾーン<br /><br />現在のユーザー<br /><br />SESSION_USER とユーザー<br /><br />SYSTEM_USER<br /><br />現在の CLIENT_APPLNAME<br /><br />現在の CLIENT_WRKSTNNAME<br /><br />現在のロックタイムアウト<br /><br />現在のスキーマ<br /><br />現在のサーバー<br /><br />現在の分離<br /><br />その他の特別なレジスタは SQL server のセマンティックにマップされません。|  
|CREATE TABLE|**SSMA には CREATE TABLE 次の例外があります。**<br /><br />多次元クラスタリング (MDC) テーブル<br /><br />範囲-クラスター化テーブル (.RCT)<br /><br />パーティション テーブル<br /><br />デタッチされたテーブル<br /><br />データキャプチャ句<br /><br />暗黙的に非表示にするオプション<br /><br />VOLATILE オプション|  
|CREATE VIEW|SSMA maps CREATE VIEW with LOCAL CHECK OPTION が使用されていますが、他のオプションは SQL server セマンティクスにマップされていません|  
|CREATE INDEX|**SSMA maps CREATE INDEX では、次の例外があります。**<br /><br />XML インデックス<br /><br />重複オプションを指定せずに BUSINESS_TIME<br /><br />パーティション分割された句<br /><br />[仕様のみ] オプション<br /><br />USING オプションを使用して拡張する<br /><br />MINPCTUSED オプション<br /><br />ページ分割オプション|  
|トリガー|**SSMA は、次のトリガーセマンティクスをマップします。**<br /><br />各行トリガーの AFTER/FOR<br /><br />各ステートメントがトリガーした後<br /><br />行ごとに、または行ごとではなく/ごとに|  
|シーケンス|マップされます。|  
|SELECT ステートメント|**SSMA maps SELECT では、次の例外があります。**<br /><br />データ変更テーブル参照句-部分的にマップされていますが、最終テーブルはサポートされていません<br /><br />テーブル参照句-部分的にマップされていますが、テーブル参照、外部テーブル参照、analyze_table 式、コレクション派生テーブル、xmltable-式は SQL server のセマンティクスにマップされていません<br /><br />期間指定句-マップされていません。<br /><br />Continue-handler 句-マップされていません。<br /><br />型指定された相関句-マップされていません。<br /><br />同時実行アクセス解決句-マップされていません。|  
|VALUES ステートメント|がマップされています。|  
|INSERT ステートメント|がマップされています。|  
|UPDATE ステートメント|S**SMA は、次の例外で更新されます。**<br /><br />テーブル参照句-のみ-テーブル参照は SQL server セマンティクスにマップされません<br /><br />Period 句-マップされていません。|  
|MERGE ステートメント|**SSMA マップマージでは、次の例外がマージされます。**<br /><br />各句の1回以上の繰り返しが、SQL server のセマンティクスにマップされ、各句の発生回数が制限されます。<br /><br />SIGNAL 句-SQL Server セマンティクスにマップされません<br /><br />混合 UPDATE 句と DELETE 句-SQL Server セマンティクスにマップされません<br /><br />Period 句-SQL Server セマンティクスにマップされません|  
|DELETE ステートメント|**SSMA maps DELETE では、次の例外があります。**<br /><br />テーブル参照句-のみ-テーブル参照は SQL server セマンティクスにマップされません<br /><br />Period 句-SQL Server セマンティクスにマップされません|  
|分離レベルとロックの種類|がマップされています。|  
|プロシージャ (SQL)|マップされます。|  
|プロシージャ (外部)|手動更新が必要です。|  
|プロシージャ (ソース)|SQL Server セマンティクスにマップしないでください。|  
|代入ステートメント|がマップされています。|  
|プロシージャの CALL ステートメント|がマップされています。|  
|CASE ステートメント|がマップされています。|  
|FOR ステートメント|がマップされています。|  
|GOTO ステートメント|がマップされています。|  
|IF ステートメント|がマップされています。|  
|繰り返しステートメント|がマップされています。|  
|LEAVE ステートメント|がマップされています。|  
|LOOP ステートメント|がマップされています。|  
|REPEAT ステートメント|がマップされています。|  
|RESIGNAL ステートメント|条件はサポートされていません。 メッセージは省略可能です。|  
|RETURN ステートメント|がマップされています。|  
|SIGNAL ステートメント|条件はサポートされていません。 メッセージは省略可能です。|  
|WHILE ステートメント|がマップされています。|  
|GET DIAGNOSTICS ステートメント|**SSMA マップでは、次の例外が表示されます。**<br /><br />ROW_COUNT-マップされます。<br /><br />DB2_RETURN_STATUS-マップされます。<br /><br />MESSAGE_TEXT-マップされます。<br /><br />DB2_SQL_NESTING_LEVEL-SQL Server セマンティクスにマップされません<br /><br />DB2_TOKEN_STRING-SQL Server セマンティクスにマップされません|  
|カーソル|**SSMA では、カーソルは次の例外でマップされます。**<br /><br />ALLOCATE CURSOR ステートメント-SQL Server セマンティクスにマップされません<br /><br />関連するロケーターステートメント-SQL Server セマンティクスにマップされません<br /><br />DECLARE CURSOR ステートメント-Returnability 句は SQL server セマンティクスにマップされていません<br /><br />FETCH ステートメント-部分マッピング。 ターゲットとしての変数はサポートされています。 SQLDA 記述子が SQL server セマンティクスにマップされていません|  
|変数|マップされます。|  
|例外、ハンドラー、および条件|**SSMA は、"例外処理" を次の例外と共にマップします。**<br /><br />終了ハンドラー-マップされます。<br /><br />元に戻すハンドラー-マップされます。<br /><br />CONTINUE ハンドラー-マップされていません。<br /><br />条件-SQL server のセマンティクスにはマップされません。|  
|動的 SQL|マップされていません。|  
|Aliases|マップされます。|  
|ニックネーム|部分マッピング。 基になるオブジェクトには手動処理が必要です|  
|シノニム|マップされます。|  
|DB2 の標準関数|SSMA maps DB2 standard 関数は、SQL Server で同等の関数を使用できる場合に使用できます。|  
|承認|マップされていません。|  
|述語|マップされます。|  
|SELECT INTO ステートメント|マップされていません。|  
|値 INTO ステートメント|マップされていません。|  
|トランザクション制御|マップされていません。|  
  
## <a name="converting-db2-database-objects"></a>DB2 データベースオブジェクトの変換  
DB2 データベースオブジェクトを変換するには、まず変換するオブジェクトを選択し、SSMA によって変換が実行されるようにします。 変換中に出力メッセージを表示するには、[ **表示** ] メニューの [ **出力**] をクリックします。  
  
**DB2 オブジェクトを SQL Server 構文に変換するには**  
  
1.  DB2 メタデータエクスプローラーで、DB2 サーバーを展開し、[ **スキーマ**] を展開します。  
  
2.  変換するオブジェクトの選択:  
  
    -   すべてのスキーマを変換するには、[ **スキーマ**] の横にあるチェックボックスをオンにします。  
  
    -   データベースを変換または省略するには、スキーマ名の横にあるチェックボックスをオンにします。  
  
    -   オブジェクトのカテゴリを変換または除外するには、スキーマを展開し、カテゴリの横にあるチェックボックスをオンまたはオフにします。  
  
    -   個々のオブジェクトを変換または除外するには、[カテゴリ] フォルダーを展開し、オブジェクトの横にあるチェックボックスをオンまたはオフにします。  
  
3.  選択したすべてのオブジェクトを変換するには、[ **スキーマ** ] を右クリックし、[ **スキーマの変換**] をクリックします。  
  
    また、オブジェクトまたはオブジェクトのカテゴリを右クリックし、[ **スキーマの変換**] を選択して、オブジェクトの個々のカテゴリを変換することもできます。  
  
## <a name="viewing-conversion-problems"></a>変換に関する問題の表示  
一部の DB2 オブジェクトが変換されない可能性があります。 変換の成功率を確認するには、概要変換レポートを表示します。  
  
**概要レポートを表示するには**  
  
1.  DB2 メタデータエクスプローラーで、[ **スキーマ**] を選択します。  
  
2.  右ペインで、[ **レポート** ] タブを選択します。  
  
    このレポートには、評価または変換されたすべてのデータベースオブジェクトの概要評価レポートが表示されます。 個々のオブジェクトの概要レポートを表示することもできます。  
  
    -   個々のスキーマのレポートを表示するには、DB2 メタデータエクスプローラーでスキーマを選択します。  
  
    -   個々のオブジェクトのレポートを表示するには、DB2 メタデータエクスプローラーでオブジェクトを選択します。 変換の問題が発生しているオブジェクトには、赤色のエラーアイコンが付いています。  
  
変換に失敗したオブジェクトの場合、変換に失敗した原因となった構文を確認できます。  
  
**個々の変換の問題を表示するには**  
  
1.  DB2 メタデータエクスプローラーで、[ **スキーマ**] を展開します。  
  
2.  赤いエラーアイコンが表示されているスキーマを展開します。  
  
3.  スキーマの下に、赤色のエラーアイコンが表示されているフォルダーを展開します。  
  
4.  赤色のエラーアイコンが付いているオブジェクトを選択します。  
  
5.  右ペインで、[ **レポート** ] タブをクリックします。  
  
6.  [ **レポート** ] タブの上部にドロップダウンリストが表示されます。 一覧に **統計**が表示されている場合は、選択範囲を **Source**に変更します。  
  
    SSMA では、コードのすぐ上にソースコードといくつかのボタンが表示されます。  
  
7.  [ **次の問題** ] ボタンをクリックします。 これは、右を指し示す矢印の付いた赤いエラーアイコンです。  
  
    SSMA は、現在のオブジェクトで検出された最初の問題のソースコードを強調表示します。  
  
変換できなかった項目ごとに、そのオブジェクトをどのように処理するかを決定する必要があります。  
  
-   ソースコードを変更するには、[ **SQL** ] タブで手順を実行します。  
  
-   DB2 データベース内のオブジェクトを変更して、問題のあるコードを削除または修正することができます。 更新されたコードを SSMA に読み込むには、メタデータを更新する必要があります。 詳細については、「 [DB2 データベースへの接続 &#40;DB2ToSQL&#41;](../../ssma/db2/connecting-to-db2-database-db2tosql.md)」を参照してください。  
  
-   オブジェクトを移行から除外することができます。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]メタデータエクスプローラーおよび Db2 メタデータエクスプローラーで、オブジェクトを db2 に読み込んでデータを移行する前に、項目の横のチェックボックスをオフにし [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ます。  
  
## <a name="next-step"></a>次の手順  
移行プロセスの次の手順では、 [変換されたオブジェクトを SQL Server に読み込み](https://msdn.microsoft.com/f4ea1ced-9f9f-4a9d-88ab-81dbab64adc3)ます。  
  
## <a name="see-also"></a>参照  
[DB2 データの SQL Server &#40;DB2ToSQL&#41;への移行 ](../../ssma/db2/migrating-db2-data-into-sql-server-db2tosql.md)  
  
