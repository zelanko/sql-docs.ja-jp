---
title: トレース フラグ (Transact-SQL) | Microsoft Docs
ms.custom: ''
ms.date: 12/12/2019
ms.prod: sql
ms.prod_service: sql-database
ms.reviewer: ''
ms.technology: t-sql
ms.topic: language-reference
dev_langs:
- TSQL
helpviewer_keywords:
- trace flags [SQL Server], about trace flags
- trace flags [SQL Server]
- global trace flags [SQL Server]
- flags [SQL Server]
- session trace flags [SQL Server]
- performance [SQL Server], trace
- debugging [SQL Server], trace flags
ms.assetid: b971b540-1ac2-435b-b191-24399eb88265
author: pmasl
ms.author: pelopes
ms.openlocfilehash: dbdaf007b66cd168ae5c32dc0c6dc0563fc7716e
ms.sourcegitcommit: 792c7548e9a07b5cd166e0007d06f64241a161f8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/19/2019
ms.locfileid: "75246992"
---
# <a name="dbcc-traceon---trace-flags-transact-sql"></a>DBCC TRACEON - トレース フラグ (Transact-SQL)

[!INCLUDE[tsql-appliesto-ss2012-asdbmi-xxxx-xxx-md](../../includes/tsql-appliesto-ss2012-asdbmi-xxxx-xxx-md.md)]

トレース フラグは、サーバー固有の特性を設定したり、特定の動作を変更したりするときに使用します。 たとえば、トレース フラグ 3226 は、よく使用されるスタートアップ トレース フラグであり、エラー ログ内のバックアップの成功メッセージを抑制します。 トレース フラグは、パフォーマンスの問題を診断する場合や、ストアド プロシージャや複雑なコンピューター システムをデバッグする場合によく使用されますが、特定のワークロードに悪影響を及ぼす動作に対応するために Microsoft サポートがお勧めすることもあります。  ドキュメントに記載されているすべてのトレース フラグと Microsoft サポートがお勧めするトレース フラグは、指示どおりに使用した場合、運用環境で完全にサポートされます。  この一覧のトレース フラグには、特定の使用法に関して追加の考慮事項が存在する可能性があるため、ここに示したすべての推奨事項とサポート エンジニアによる推奨事項を慎重に検討することをお勧めします。 また、SQL Server での構成変更と同様に、展開する前に、運用環境以外でこのフラグを徹底的にテストすることをお勧めします。

## <a name="remarks"></a>解説  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] には、クエリ、セッション、グローバルという 3 種類のトレース フラグがあります。 クエリ トレース フラグは、特定のクエリのコンテキストに対してアクティブです。 セッション トレース フラグは、1 つの接続についてアクティブで、その接続に対してのみ表示可能です。 グローバル トレース フラグは、サーバー レベルで設定され、サーバー上のすべての接続に対して表示可能です。 フラグには、グローバルとしてのみ有効化できるフラグと、グローバルまたはセッション スコープのどちらかで有効化できるフラグがあります。  
  
 次の規則が適用されます。  
-   グローバル トレース フラグは、グローバルに有効化する必要があります。 グローバルに有効化しない場合、そのトレース フラグは機能しません。 グローバル トレース フラグは、 **-T** コマンド ライン オプションを使用して、起動時に有効化することをお勧めします。 このようにすると、サーバーの再起動後も、トレース フラグはアクティブなままになります。 トレース フラグを有効にするには、SQL Server を再起動します。 
-   トレース フラグのスコープがグローバル、セッション、クエリのいずれかの場合、適切なスコープで有効化できます。 セッション レベルで有効化したトレース フラグは、別のセッションには影響せず、セッションを開いた SPID がログアウトすると無効になります。  
  
トレース フラグを有効または無効にするには、次のいずれかの方法を使用します。
-   DBCC TRACEON と DBCC TRACEOFF コマンドを使用する。  
     たとえば、2528 トレース フラグをグローバルに有効にするには、[DBCC TRACEON](../../t-sql/database-console-commands/dbcc-traceon-transact-sql.md) を使って引数 -1 を指定します (`DBCC TRACEON (2528, -1)`)。 DBCC TRACEON で有効にしたグローバル トレース フラグの効果は、サーバーを再起動すると失われます。 グローバル トレース フラグをオフにするには、[DBCC TRACEOFF](../../t-sql/database-console-commands/dbcc-traceoff-transact-sql.md) で引数 -1 を指定します。  
-   スタートアップ オプション **-T** を使用して、起動時にトレース フラグが有効に設定されるように指定する。  
     スタートアップ オプション **-T** を使用すると、トレース フラグをグローバルに有効化できます。 スタートアップ オプションでは、セッションレベルのトレース フラグは有効化できません。 このようにすると、サーバーの再起動後も、トレース フラグはアクティブなままになります。 スタートアップ オプションの詳細については、「 [データベース エンジン サービスのスタートアップ オプション](../../database-engine/configure-windows/database-engine-service-startup-options.md)」をご覧ください。
-   クエリ レベルで、QUERYTRACEON [クエリ ヒント](https://support.microsoft.com/kb/2801413)を使用する。 QUERYTRACEON オプションは、前述の表に記載されているクエリ オプティマイザー トレース フラグに対してのみサポートされています。
  
現在有効なトレース フラグを確認するには、`DBCC TRACESTATUS` コマンドを使用します。

## <a name="trace-flags"></a>トレース フラグ

次の表は、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で使用できるトレース フラグの一覧とその説明です。 

> [!NOTE]
> Azure SQL Database Managed Instance では、次のグローバル トレース フラグがサポートされています。460、2301、2389、2390、2453、2467、7471、8207、9389、10316、および 11024。 Managed Instance では、セッション トレース フラグはまだサポートされていません。
 
> [!NOTE]
> 一部のトレース フラグは、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の特定のバージョンで導入されました。 該当するバージョンについて詳しくは、特定のトレース フラグに関連する Microsoft サポート記事をご覧ください。

> [!IMPORTANT]
> トレース フラグの動作は、今後の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のリリースではサポートされない可能性もあります。 
  
|トレース フラグ|[説明]|  
|---|---|
|**139**| 互換性レベルが低いデータベースで、特定のデータ型に対して互換性レベル 130 で導入された精度の向上と変換ロジックを分析するときに、[DBCC CHECKDB](../../t-sql/database-console-commands/dbcc-checkdb-transact-sql.md)、[DBCC CHECKTABLE](../../t-sql/database-console-commands/dbcc-checktable-transact-sql.md)、[DBCC CHECKCONSTRAINTS](../../t-sql/database-console-commands/dbcc-checkconstraints-transact-sql.md) などの DBCC チェック コマンドのスコープで正しい変換セマンティクスを強制します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/4010261)をご覧ください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM CU3、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降のビルドに適用されます。<br /><br />**警告:** トレース フラグ 139 は、運用環境で継続的に有効にすることを意図したものではなく、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/4010261)で説明されているデータベース検証チェックの実行のみを目的として使う必要があります。 検証チェック完了後直ちに無効にする必要があります。<br /><br />**スコープ**: グローバルのみ|
|**174**|64 ビット システムで、[!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] プラン キャッシュ バケット数を 40,009 から 160,001 に増やします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3026083)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバルのみ|
|**176**|計算済みパーティション分割列を含むテーブルのパーティションをオンラインで再構築するときに、アドレス エラーを修正できるようにします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3213683)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**205**|統計の自動更新の結果として統計に依存するストアド プロシージャが再コンパイルされるときに、エラー ログにレポートします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/195565)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**260**|拡張ストアド プロシージャのダイナミックリンク ライブラリ (DLL) に関するバージョン情報を出力します。 **GetXpVersion()** について詳しくは、「[拡張ストアド プロシージャの作成](../../relational-databases/extended-stored-procedures-programming/creating-extended-stored-procedures.md)」をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**272**|サーバーが突然再起動したか、セカンダリ サーバーにフェールオーバーしたときに ID 列の値に隔たりができることを回避するため、ID の事前割り当てを無効にします。 ID キャッシュは ID 列が含まれるテーブルでの INSERT パフォーマンスを改善するために使われることに注意してください。<br /><br />**注:** [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 以降において、データベース レベルでこれを行う方法については、「[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)」の IDENTITY_CACHE オプションを参照してください。<br /><br />**スコープ**: グローバルのみ|
|**460**|データ切り捨てのメッセージ ID [8152](../../relational-databases/errors-events/database-engine-events-and-errors.md#errors-8000-to-8999) がメッセージ ID [2628](../../relational-databases/errors-events/database-engine-events-and-errors.md#errors-2000-to-2999) に置き換えられます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/4468101)をご覧ください。<br /><br />[!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CTP 2.4 以降に、データベース レベルでこれを行う方法については、「[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)」の VERBOSE_TRUNCATION_WARNINGS オプションを参照してください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU12 以降のビルドに適用されます。<br /><br />**注:** データベース互換性レベル 150 からはメッセージ ID 2628 が既定値となり、このトレース フラグに影響がありません。<br /><br />**スコープ**: グローバル、セッション|
|**610**|インデックスが作成されたテーブルへの最小ログ記録の挿入を制御します。 SQL Server 2016 以降では、インデックスが作成されたテーブルに対しては最小ログ記録が既定で有効になるため、このトレース フラグは必要ありません。 SQL Server 2016 では、一括読み込み操作により新しいページが割り当てられると、最小ログ記録の他のすべての前提条件が満たされている場合は、その新しいページに順番に入力されるすべての行が最小ログ記録されます。 インデックスの順序を維持するために (新しいページの割り当てなしで) 既存のページに挿入される行は、読み込み中のページ分割の結果として移動される行なので、完全ログ記録されます。 また、重要なこととして、割り当ての間にはページ ロックが取得されることによってページまたはエクステントの割り当てだけがログに記録されるので、最小ログ記録操作が機能するには、インデックスの ALLOW_PAGE_LOCKS を ON 荷する必要があります (既定値は ON)。詳しくは、「[データ ローディング パフォーマンス ガイド](https://msdn.microsoft.com/library/dd425070.aspx)」をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**634**|バックグラウンドの列ストア圧縮タスクを無効にします。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では、圧縮されていないデータが含まれる列ストア インデックス行グループを圧縮する組ムーバー バックグラウンド タスクが定期的に実行されます。この行グループの圧縮処理は 1 つずつ実行されます。<br /><br />列ストアの圧縮によりクエリのパフォーマンスは向上しますが、この処理はシステム リソースを消費します。 列ストア圧縮のタイミングは手動で制御できます。それには、トレース フラグ 634 でバックグラウンド圧縮タスクを無効にし、好きなタイミングで ALTER INDEX...REORGANIZE または ALTER INDEX...REBUILD を明示的に呼び出します。<br /><br />**スコープ**: グローバルのみ|
|**652**|ページのプリフェッチ スキャンを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**661**|ゴースト レコードの削除プロセスを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**692**|ヒープまたはクラスター化インデックスへのデータの一括読み込みの間に高速挿入を無効にします。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、新しいページに挿入されるレコードの挿入パフォーマンスを最適化するため、データベースが単純復旧モデルまたは一括ログ復旧モデルのときは、既定で、最小ログ記録を利用して高速挿入が有効になります。 高速挿入では、挿入のパフォーマンスを最適化するため、各一括読み込みバッチは新しいエクステントを取得し、使用可能な空き領域を持つ既存エクステントの割り当ての参照をバイパスします。<br /><br /> 高速挿入では、小さいバッチ サイズの一括読み込みにより、オブジェクトによって消費される未使用領域が増加する可能性があるため、各バッチに大きいバッチ サイズを使ってエクステントを完全に埋めることをお勧めします。 バッチ サイズを大きくできない場合は、このトレース フラグを使うと、パフォーマンスは低下しますが、確保される未使用領域を減らすのに役立ちます。 <br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] RTM 以降のビルドに適用されます。<br /><br />**スコープ**: グローバル、セッション|
|**715**|非クラスター化インデックスのないヒープへの一括読み込み操作で、テーブル ロックを有効にします。 このトレース フラグを有効にすると、一括読み込み操作は、テーブルにデータを一括コピーするときに、一括更新 (BU) ロックを取得します。 一括更新 (BU) ロックをかけると、同時に複数のスレッドによりデータを同一のテーブルに一括で読み込むことができますが、一括読み込みに参加していない他のプロセスは、その間テーブルにアクセスできません。<br /><br />この動作は、一括読み込みを実行するときにユーザーが明示的に TABLOCK ヒントを指定する場合、または一括読み込みでの sp_tableoption テーブル ロックが特定のテーブルに対して有効になっている場合と、似ています。 ただし、このトレース フラグを有効にすると、クエリまたはデータベースの変更なしに、この動作が既定になります。<br /><br />**スコープ**: グローバル、セッション|
|**834**|バッファー プール、列ストア、およびインメモリ テーブルに対して大きいページの割り当てを使用します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3210239)をご覧ください。<br /><br />**注:** 大きいページのメモリ モデルを有効にした場合、インスタンスの起動時にすべての SQLOS メモリが事前に割り当てられ、そのメモリは OS に返されません。<br /><br />**注:** [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] の列ストア インデックス機能を [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] に対して使用する場合は、トレース フラグ 834 をオンにしないことをお勧めします。 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] と列ストアを使用する場合は、代わりにトレース フラグ 876 を参照してください。<br /><br />**スコープ**: グローバルのみ|
|**845**|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のサービス アカウントで Lock Pages in Memory 特権が有効になっている場合、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の Standard SKU でロックされたページを有効にします。 詳しくは、こちらの[Microsoft サポート技術情報](https://support.microsoft.com/kb/970070)およびドキュメント ページ「[サーバー メモリに関するサーバー構成オプション](../../database-engine/configure-windows/server-memory-server-configuration-options.md#lock-pages-in-memory-lpim)」をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 以降では、この動作は Standard SKU に対して既定で有効になるので、トレース フラグ 845 を使わないでください。<br /><br />**スコープ**: グローバルのみ|
|**876**|列ストアに大きいページの割り当てを使用します。<br /><br />**注:** トレース フラグ 834 とは異なり、トレース フラグ 876 を使用すると、インスタンスの起動時に SQLOS メモリが事前に割り当てられず、未使用のメモリを解放できます。<br /><br />**注:** このトレース フラグは、[!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 以降のビルドに適用されます。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバルのみ|
|**902**|累積更新プログラムまたは Service Pack をインストールするときに、データベース アップグレード スクリプトの実行をバイパスします。 スクリプト アップグレード モード中にエラーが発生する場合は、Microsoft SQL のカスタマー サービスとサポート (CSS) に詳しいガイダンスを問い合わせることをお勧めします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2163980)をご覧ください。<br /><br />**警告:** このトレース フラグは、スクリプト アップグレード モード中に更新が失敗した場合のトラブルシューティングを目的としたものであり、運用環境での継続的な実行はサポートされていません。 累積的な更新プログラムと Service Pack を完全にインストールするには、データベース アップグレード スクリプトが正常に実行される必要があります。 そうでない場合、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスで予期しない問題が発生することがあります。<br /><br />**スコープ**: グローバルのみ|
|**1117**|ファイル グループ内のファイルが自動拡張のしきい値を満たすときに、ファイル グループ内のすべてのファイルを拡張します。 このトレース フラグはすべてのデータベースに影響します。すべてのデータベースでファイルグループ内のすべてのファイルが同量ずつ安全に拡張できる場合にのみ推奨されます。<br /><br />**注:** [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作は ALTER DATABASE の AUTOGROW_SINGLE_FILE および AUTOGROW_ALL_FILES オプションによって制御されるようになり、トレース フラグ 1117 の効力はなくなりました。 詳細については、「[ALTER DATABASE の File および Filegroup オプション &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-file-and-filegroup-options.md)」を参照してください。<br /><br />**スコープ**: グローバルのみ|
|**1118**|混合エクステントではなく単一エクステント上でページの割り当てを強制することにより、SGAM ページでの競合が減少します。 新しいオブジェクトが作成されると、既定では、最初の 8 ページは異なるエクステント (混合エクステント) から割り当てられます。 後でページを追加する必要が生じる場合、それらのページは同じエクステント (単一エクステント) から割り当てられます。 SGAM ページはこれらの混合エクステントを追跡するのに使用されます。これは、混合ページの割り当てが多く発生した場合に、それらの混合エクステントが即座にボトルネックとなる可能性があるためです。 新しいオブジェクトを作成する際、このトレース フラグにより 8 ページすべてが同じエクステントから割り当てられるため、SGAM ページをスキャンする必要性が最小限に抑えられます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/328551)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作は ALTER DATABASE の SET MIXED_PAGE_ALLOCATION オプションによって制御されるようになり、トレース フラグ 1118 の効力はなくなりました。 詳細については、「[ALTER DATABASE の SET オプション &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-set-options.md)」を参照してください。<br /><br />**スコープ**: グローバルのみ|  
|**1204**|デッドロックに関係しているロックのリソースと種類、および影響を受けている現在のコマンドを返します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/832524)をご覧ください。<br /><br />**スコープ**: グローバルのみ|  
|**1211**|メモリの負荷またはロック数に基づいて、ロックのエスカレーションを無効にします。 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]において、行ロックまたはページ ロックはテーブル ロックにエスカレートされません。<br /><br />このトレース フラグを使用すると、過剰な数のロックが発生する可能性があります。ロック メモリのサイズが十分に大きくなると、クエリに対して追加のロックを割り当てようとする試みは失敗する可能性があります。 これが原因で[!INCLUDE[ssDE](../../includes/ssde-md.md)]のパフォーマンスが悪化したり、メモリ不足によって 1204 エラー (ロック リソース割り当て不能) が発生する可能性があります。<br /><br />トレース フラグ 1211 と 1224 の両方を設定した場合、1224 よりも 1211 が優先されます。 ただし、トレース フラグ 1211 では、メモリに負荷がかかっていたとしてもすべての場合でエスカレーションが無効になるので、代わりに 1224 の使用をお勧めします。 これで、多数のロックが使用中でも "ロック不足" エラーを回避することができます。<br /><br />[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] でのロックのエスカレーションが原因であるブロッキングの問題を解決する方法の詳細については、この [Microsoft サポート技術情報](https://support.microsoft.com/help/323630)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|  
|**1222**|デッドロックに関係しているロックのリソースと種類、および影響を受けている現在のコマンドを、どの XSD スキーマにも準拠しない XML 形式で返します。<br /><br />**スコープ**: グローバルのみ|  
|**1224**|ロック数に基づいてロックのエスカレーションを無効にします。 ただし、メモリに負荷がかかっていてもロックのエスカレーションは有効にできます。 [!INCLUDE[ssDE](../../includes/ssde-md.md)] では、ロック オブジェクトで使用されるメモリ量が次のいずれかの条件を超えた場合に、行ロックまたはページ ロックがテーブル ロック (またはパーティション ロック) にエスカレートされます。<br /><ul><li>[!INCLUDE[ssDE](../../includes/ssde-md.md)] で使われるメモリの 40%。 これは、sp_configure の **locks** パラメーターが 0 に設定されている場合にのみ適用されます。 <li>sp_configure の **locks** パラメーターを使って構成されるロック メモリの 40%。 詳細については、「 [サーバー構成オプション &#40;SQL Server&#41;](../../database-engine/configure-windows/server-configuration-options-sql-server.md)」を参照してください。</li></ul><br />トレース フラグ 1211 と 1224 の両方を設定した場合、1224 よりも 1211 が優先されます。 ただし、トレース フラグ 1211 では、メモリに負荷がかかっていたとしてもすべての場合のエスカレーションが無効になるわけではないので、1224 の使用をお勧めします。 これで、多数のロックが使用中でも "ロック不足" エラーを回避することができます。<br /><br />**注:** テーブル レベルまたは HoBT レベルの細分性へのロックのエスカレーションは、[ALTER TABLE](../../t-sql/statements/alter-table-transact-sql.md) ステートメントの LOCK_ESCALATION オプションで制御することもできます。<br /><br />[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] でのロックのエスカレーションが原因であるブロッキングの問題を解決する方法の詳細については、この [Microsoft サポート技術情報](https://support.microsoft.com/help/323630)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**1229**|CPU の数に関係なく、すべてのロックのパーティション分割を無効にします。 既定では、より大規模なシステムのスケーラビリティ特性を向上させるために、サーバーに 16 個以上の CPU が搭載されている場合は、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] によりロックのパーティション分割が有効にされます。 パーティション分割のロックの詳細については、「[トランザクションのロックおよび行のバージョン管理ガイド](../../relational-databases/sql-server-transaction-locking-and-row-versioning-guide.md#lock_partitioning)」を参照してください。<br /><br />**警告:** トレース フラグ 1229 の場合、スピンロックの競合が発生してパフォーマンスが低下したり、パーティションを切り替えるときに予期しない動作が発生したりする可能性があります。<br /><br />**スコープ**: グローバルのみ|  
|**1236**|データベース ロックのパーティション分割を有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2926217)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP3 および [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 以降、この動作はエンジンによって制御されるようになり、トレース フラグ 1236 に効力はありません。<br /><br />**スコープ**: グローバルのみ|
|**1237**|ALTER PARTITION FUNCTION ステートメントが、既定でデッドロック対象候補になるのではなく、現在のユーザー定義のセッション デッドロック優先順位に従うことができるようにします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/4025261)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQLv14](../../includes/sssqlv14-md.md)] 以降およびデータベース[互換性レベル](../../t-sql/statements/alter-database-transact-sql-compatibility-level.md) 140 では、これが既定の動作であり、トレース フラグ 1237 に効力はありません。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**1260**|スケジューラ モニターのダンプを無効にします。<br /><br />**スコープ**: グローバルのみ|   
|**1448**|非同期セカンダリで変更の受信が確認されていない場合でもレプリケーション ログ リーダーが前へ移動できるようにします。 このトレース フラグが有効でも、ログ リーダーは常に同期セカンダリを待機します。 ログ リーダーは同期セカンダリの最小 ack を超えることはありません。 このトレース フラグは、可用性グループ、可用性データベース、またはログ リーダー インスタンスだけでなく、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスにも適用されます。 再起動しなくてもすぐに有効になります。 このトレース フラグは、事前にアクティブにすることも、非同期セカンダリが失敗したときにアクティブにすることもできます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/937041)をご覧ください。<br /><br />**スコープ**: グローバルのみ|   
|**1462**|非同期可用性グループのログ ストリーム圧縮を無効にします。 ネットワーク帯域幅を最適化するため、非同期可用性グループではこの機能は既定で有効にされています。 詳細については、「 [Tune compression for availability group](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)」(可用性グループの圧縮を調整する) を参照してください。<br /><br />**スコープ**: グローバルのみ| 
|**1800**|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Always On 環境およびログ配布環境では、プライマリとセカンダリのレプリカ ログ ファイルで異なるセクター サイズのディスクが使われているときは、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の最適化を有効にします。 このトレース フラグは、セクター サイズが 512 バイトのディスクにトランザクション ログ ファイルが存在する SQL Server インスタンスでのみ、有効にする必要があります。 セクター サイズが 4 K のディスクでは、有効にする必要は**ありません**。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3009974)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**2301**|高度な意思決定支援の最適化を有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2312**|データベースの互換性レベルに応じて、クエリ オプティマイザーのカーディナリティ推定モデルを [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 以降のバージョンに設定します。<br /><br />**注:** データベースの互換性レベルが 120 未満の場合、トレース フラグ 2312 を有効にすることにより [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] (120) のカーディナリティ推定モデルが使用されます。 詳しくは、[Microsoft サポート技術情報](https://support.microsoft.com/kb/2801413)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降、クエリ レベルでこれを行うには、このトレース フラグの代わりに、USE HINT 'FORCE_DEFAULT_CARDINALITY_ESTIMATION' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**スコープ**: グローバル、セッション、クエリ| 
|**2335**|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がクエリ最適化中に固定量のメモリがあるものと想定するようになります。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がクエリ実行に許可するメモリを制限することはありません。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 用に構成されたメモリは、やはり、データ キャッシュ、クエリ実行、その他のコンシューマーによって使われます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2413549)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2340**|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] は、クエリ プランを生成するときに、最適化された入れ子になったループ結合に対して並べ替え操作 (バッチ ソート) を使わなくなります。 既定では、並べ替えが必要とされる可能性が低い一方で、カーディナリティまたはコストの見積もりが正しくない場合には可能性があるとクエリ オプティマイザーによって判断された場合、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では、フル スキャンまたは Sort を明示的に指定したネステッド ループ結合ではなく、最適化されたネステッド ループ結合を使用できます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2009160)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降、クエリ レベルでこれを行うには、このトレース フラグの代わりに、USE HINT 'DISABLE_OPTIMIZED_NESTED_LOOP' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2371**|固定の統計の更新しきい値を、線形の統計の更新しきい値に変更します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2754171)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降、および[データベース互換性レベル](../../relational-databases/databases/view-or-change-the-compatibility-level-of-a-database.md) 130 以上では、この動作はエンジンによって制御されるようになり、トレース フラグ 2371 に効力はありません。<br /><br />**スコープ**: グローバルのみ|
|**2389**|昇順キー (ヒストグラム修正) に対して、自動生成されたクイック統計情報を有効にします。 トレース フラグ 2389 を設定し、先頭の統計情報列を昇順としてマークすると、カーディナリティの推定に使われるヒストグラムがクエリのコンパイル時に調整されます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2801413)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**注:** このトレース フラグは CE バージョン 120 以上には適用されません。 トレース フラグ 4139 を代わりに使ってください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2390**|昇順キーまたは不明キー (ヒストグラム修正) に対して、自動生成されたクイック統計情報を有効にします。 トレース フラグ 2390 を設定し、先頭の統計情報列を昇順または不明としてマークすると、カーディナリティの推定に使われるヒストグラムがクエリのコンパイル時に調整されます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2801413)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**注:** このトレース フラグは CE バージョン 120 以上には適用されません。 トレース フラグ 4139 を代わりに使ってください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2422**|Resource Governor の REQUEST_MAX_CPU_TIME_SEC の構成によって設定されている最大時間を超えたときに、[!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] が要求を中止できるようにします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/4038419)をご覧ください。<br /><br />**注:** このトレース フラグは [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU3 以降のビルドに適用されます。<br /><br />**スコープ**: グローバル|
|**2430**|代替ロック クラスのクリーンアップを有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2754301)をご覧ください。<br /><br />**スコープ**: グローバルのみ| 
|**2451**|sys.dm_exec_query_plan_stats の、最後の実際の実行プランと同等のものが有効になります。<br /><br />**注:** このトレース フラグは、[!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CTP 2.4 以降のビルドに適用されます。<br /><br />**注:** [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] CTP 2.5 以降でデータベース レベルでこれを行う方法については、「[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)」の LAST_QUERY_PLAN_STATS オプションをご覧ください。<br /><br />**スコープ**: グローバルのみ|  
|**2453**|十分な数の行が変更されたときに、テーブル変数が再コンパイルをトリガーできるようにします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2952444)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2467**|どのノードのスレッド割り当てが最も少ないかに基づいて、代替の並列ワーカー スレッド割り当てポリシーを有効にします。 詳細については、「[並列クエリ処理](../../relational-databases/query-processing-architecture-guide.md#parallel-query-processing)」をご覧ください。 max worker threads サーバー オプションの構成に関する情報については、「[max worker threads サーバー構成オプションの構成](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md)」を参照してください。<br /><br />**注:** この代替ポリシーを使用するには、クエリの並列処理の次数 (DOP) が 1 つのノードに収まる必要があります。そうでない場合は、既定のスレッド割り当てポリシーが代わりに使用されます。 このトレース フラグを使用する場合、1 つのノードのスケジューラの数を超える DOP を指定するクエリを実行することはお勧めしません。これは、1 つのノードのスケジューラの数以下の DOP を指定するクエリと競合するためです。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバルのみ|
|**2469**|パーティション分割されている列ストア インデックスで、`INSERT INTO ... SELECT` の代替交換を有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3204769)をご覧ください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**2528**|DBCC CHECKDB、DBCC CHECKFILEGROUP、および DBCC CHECKTABLE によるオブジェクトの並列検査を無効にします。 既定では、並列処理の次数はクエリ プロセッサによって自動的に決定されます。 並列処理の最大限度は並列クエリと同様に構成します。 詳細については、「 [max degree of parallelism サーバー構成オプションの構成](../../database-engine/configure-windows/configure-the-max-degree-of-parallelism-server-configuration-option.md)」を参照してください。<br /><br />**注:** 通常、並列 DBCC チェックは有効になっています (既定値)。 クエリ プロセッサは、DBCC CHECKDB によってチェックされるテーブルまたはテーブルの集合ごとに、並列処理を再評価して自動的に調節します。<br /><br />一般的な使用シナリオは、DBCC CHECKDB が完了する前にサーバーの負荷が増加することをシステム管理者が認識し、他のユーザーのワークロードでのコンカレンシーを高めるために、並列処理を手動で減らしたり無効にしたりする場合です。 ただし、DBCC CHECKDB での並列チェックを無効にすると、完了までの時間が長くなる場合があります。<br /><br />**注:** TABLOCK オプションを使って DBCC CHECKDB を実行していて、並列処理が無効になっている場合は、テーブルが長時間ロックされる可能性があります。<br /><br />**注:** [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 以降では、DBCC ステートメントの sp_configure の最大並列度構成オプションを、MAXDOP オプションでオーバーライドできます。<br /><br />**スコープ**: グローバル、セッション|
|**2549**|各データベース ファイルが固有のディスク ドライブにあるものとし、一方で複数の物理ファイルを 1 つの論理ファイルとして扱うものとするために、DBCC CHECKDB コマンドを強制実行します。 DBCC CHECKDB コマンドは、すべてのデータベース ファイルについて、固有のディスク ドライブごとに読み取るページの内部リストを作成します。 このロジックは、各ファイルの物理ファイル名のドライブ文字を基にして固有のディスク ドライブを決定します。<br /><br />**注:** 各ファイルが固有の物理ディスクに基づくことがわかっている場合を除き、このトレース フラグを使わないでください。<br /><br />**注:** このトレース フラグを指定すると、PHYSICAL_ONLY オプションの使用を対象とする DBCC CHECKDB コマンドのパフォーマンスが向上しますが、ユーザーによってはパフォーマンスが向上しないことがあります。 このトレース フラグではディスク I/O のリソース使用率が向上しますが、基になっているディスク リソースのパフォーマンスにより、DBCC CHECKDB コマンドの全体的なパフォーマンスが制限される場合があります。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2634571)をご覧ください。<br /><br />**スコープ**: グローバルのみ| 
|**2562**|データベース内のインデックスの数に関係なく、1 回の "バッチ" で DBCC CHECKDB コマンドを実行します。 既定では、DBCC CHECKDB コマンドは、"バッチ" の概念を使って、生成されるインデックスまたは "ファクト" の数を制限することにより、TempDB リソースを最小限に抑えようとします。 ただしこのトレース フラグは、すべての処理を 1 つのバッチで強制的に実行します。<br /><br />このトレース フラグを使ったときの影響の 1 つは、TempDB に必要な領域が増える可能性があることです。 TempDB は、DBCC CHECKDB コマンドによって処理されているユーザー データベースの 5% 以上に拡大することがあります。<br /><br />**注:** このトレース フラグを指定すると、PHYSICAL_ONLY オプションの使用を対象とする DBCC CHECKDB コマンドのパフォーマンスが向上しますが、ユーザーによってはパフォーマンスが向上しないことがあります。 このトレース フラグではディスク I/O のリソース使用率が向上しますが、基になっているディスク リソースのパフォーマンスにより、DBCC CHECKDB コマンドの全体的なパフォーマンスが制限される場合があります。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2634571)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**2566**|`DATA_PURITY` オプションが指定されていない場合は、データ純粋性チェックなしで DBCC CHECKDB コマンドを実行します。<br /><br />**注:** 列の値の整合性チェックは既定で有効になっているため、DATA_PURITY オプションを指定する必要はありません。 以前のバージョンの SQL Server からアップグレードしたデータベースの場合は、データベースで DBCC CHECKDB WITH DATA_PURITY が少なくとも 1 回はエラーなしで実行されるまで、列の値のチェックは既定では有効になりません。 エラーなく実行されると、その後、DBCC CHECKDB は既定で列の値の整合性をチェックします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/945770)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**2592**|トレース フラグ **3656** と組み合わせて使用する場合、Windows 用のデバッグ ツールがインストールされると、スタック ダンプでのシンボルの解決が有効になります。 詳細については、[Microsoft ホワイトペーパー](https://www.microsoft.com/download/details.aspx?id=26666)を参照してください。<br /><br />**警告:** これはデバッグ トレース フラグで、運用環境での使用には適していません。<br /><br />**注:** このトレース フラグは、[!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 以降のビルドに適用されます。 <br/><br/>**スコープ**: グローバル、セッション|
|**3023**|BACKUP コマンドの既定値として CHECKSUM オプションを有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2656988)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 以降では、この動作は **backup checksum default** 構成オプションを設定することによって制御されます。 詳細については、「 [サーバー構成オプション &#40;SQL Server&#41;](../../database-engine/configure-windows/server-configuration-options-sql-server.md)」を参照してください。<br /><br />**スコープ**: グローバル、セッション|
|**3042**|既定のバックアップ圧縮の事前割り当てアルゴリズムをバイパスして、最終的なサイズに到達するまで、必要な場合にのみバックアップ ファイルが拡張されるようにします。 このトレース フラグは、圧縮されたバックアップに実際に必要なサイズだけを割り当てることによって、容量を節約する必要がある場合に便利です。 このトレース フラグを使用すると、わずかなパフォーマンスの低下 (バックアップ操作の期間が長くなる可能性) が発生することがあります。 事前割り当てアルゴリズムについて詳しくは、「[バックアップの圧縮 &#40;SQL Server&#41;](../../relational-databases/backup-restore/backup-compression-sql-server.md)」をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**3051**|SQL Server Backup to URL が特定のエラー ログ ファイルにログを記録できるようにします。 詳しくは、「[SQL Server Backup to URL に関するベスト プラクティスとトラブルシューティング](../../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md)」をご覧ください。<br /><br />**スコープ**: グローバルのみ|  
|**3205**|既定では、テープ ドライブでハードウェア圧縮がサポートされている場合、DUMP または BACKUP ステートメントではハードウェア圧縮が行われます。 このトレース フラグを使用すると、テープ デバイスのハードウェア圧縮を無効にできます。 この機能は、圧縮がサポートされていないサイトやテープ ドライブとの間でテープを交換する場合に便利です。<br /><br />**スコープ**: グローバル、セッション|  
|**3226**|既定では、バックアップ操作が成功するたびに、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エラー ログおよびシステム イベント ログにエントリが 1 つ追加されます。 頻度の高いログ バックアップを作成すると、これらの成功メッセージがすぐに蓄積され、他のメッセージを探すのが困難になるほどエラー ログが大きくなることがあります。<br /><br />このトレース フラグを使用すると、これらのログ エントリを除外できます。 この機能は、頻度の高いログ バックアップを実行している場合やスクリプトがこれらのエントリに依存していない場合に役立ちます。<br /><br />**スコープ**: グローバルのみ|   
|**3427**|[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] で多数の連続するトランザクションによって一時テーブルにデータが挿入される場合に、この操作により [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] よりも多くの CPU が消費される問題の修正を有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/3216543)をご覧ください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 CU2 から [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2 CU2 に適用されます。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2 CU3 および [!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 以降では、このトレース フラグによる影響はありません。<br /><br />**スコープ**: グローバルのみ|  
|**3459**|並列再実行を無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/3200975)および [Microsoft サポート技術情報](https://support.microsoft.com/help/4101554)を参照してください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)]、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] 以降のビルドに適用されます。<br /><br />**スコープ**: グローバルのみ| 
|**3468**|TempDB で[間接チェックポイント](../../relational-databases/logs/database-checkpoints-sql-server.md#IndirectChkpt)を無効にします。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 CU5、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU1、およびそれ以降のビルドに適用されます。<br /><br />**スコープ**: グローバルのみ|  
|**3608**|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で、**master** データベース以外のすべてのデータベースを自動的に開始および復旧しないようにします。 **TempDB** を必要とする操作が開始されると、**model** が復旧され、**TempDB** が作成されます。 他のデータベースはアクセス時に開始および復旧されます。 スナップショット分離や READ COMMITTED スナップショットなど、一部の機能を使用できない場合があります。 [システム データベースの移動](../../relational-databases/databases/move-system-databases.md)と[ユーザー データベースの移動](../../relational-databases/databases/move-user-databases.md)の場合に使用します。<br /><br />**注:** 通常の運用中は使用しないでください。<br /><br />**スコープ**: グローバルのみ|   
|**3625**|"\*\*\*\*\*\*" を使用する一部のエラー メッセージのパラメーターをマスクすることによって、sysadmin 固定サーバー ロールのメンバーでないユーザーに返される情報の量を制限します。 これは、機密情報の公開を防ぐために役立ちます。<br /><br />**スコープ**: グローバルのみ|  
|**3656**|Windows 用のデバッグ ツールがインストールされるときに、スタック ダンプでのシンボルの解決を有効にします。 詳細については、[Microsoft ホワイトペーパー](https://www.microsoft.com/download/details.aspx?id=26666)を参照してください。<br /><br />**警告:** これはデバッグ トレース フラグで、運用環境での使用には適していません。<br /><br />**注:** [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 以降、シンボルの解決を有効にするには、トレース フラグ 3656 と組み合わせてトレース フラグ **2592** を有効にする必要があります。 <br/><br/>**スコープ**: グローバル、セッション|
|**4136**|OPTION(RECOMPILE)、WITH RECOMPILE 、または OPTIMIZE FOR \<value> が使われていない場合、パラメーター スニッフィングを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/980653)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降に、データベース レベルでこの処理を行う方法については、「[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)」の PARAMETER_SNIFFING オプションを参照してください。<br /><br />クエリ レベルで同じ結果を達成するには、OPTIMIZE FOR UNKNOWN [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。 OPTIMIZE FOR UNKNOWN ヒントではパラメーター スニッフィングのメカニズムは無効にされませんが、意図した同じ結果を達成するために効果的にバイパスされます。<br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降では、クエリ レベルでこれを行うもう 1 つのオプションとして、このトレース フラグの代わりに、USE HINT 'DISABLE_PARAMETER_SNIFFING' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加することもできます。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション|  
|**4137**|[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 以前のバージョン (70) のクエリ オプティマイザー カーディナリティ推定モデルにおいて、依存関係の代わりに部分的相関関係を考慮するためにフィルターの AND 述語を推定するときに、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で最低限の選択度を使ってプランが生成されるようにします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2658214)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降では、これをクエリ レベルで達成するためには、CE 70 の使用時にこのトレース フラグを使用する代わりに、USE HINT 'ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**注:** このトレース フラグは CE バージョン 120 以上には適用されません。 トレース フラグ 9471 を代わりに使ってください。<br /><br />**スコープ**: グローバル、セッション、クエリ| 
|**4138**|TOP、OPTION (FAST N)、IN、EXISTS のいずれかのキーワードを含むクエリで行の目標の調整を使用しないプランを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] に生成させます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2667211)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降、クエリ レベルでこれを行うには、このトレース フラグの代わりに、USE HINT 'DISABLE_OPTIMIZER_ROWGOAL' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ| 
|**4139**|キー列の状態に関係なく、自動生成されるクイック統計情報 (ヒストグラム修正) を有効にします。 トレース フラグ 4139 を設定すると、先頭の統計情報列の状態 (昇順、降順、または定常) に関係なく、カーディナリティの推定に使われるヒストグラムがクエリのコンパイル時に調整されます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2952101)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降では、クエリ レベルでこれを行うには、このトレース フラグの代わりに、USE HINT 'ENABLE_HIST_AMENDMENT_FOR_ASC_KEYS' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**注:** このトレース フラグは CE バージョン 70 には適用されません。 代わりにトレース フラグ 2389 および 2390 を使ってください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**4199**|<a name="4199"></a>[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の累積的な更新プログラムと Service Pack でリリースされたクエリ オプティマイザー (QO) の修正プログラムを有効にします。<br /><br />[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の以前のリリースで行われた QO の変更は、特定の製品リリースの最新のデータベース[互換性レベル](../../t-sql/statements/alter-database-transact-sql-compatibility-level.md)では、トレース フラグ 4199 を有効にしなくても、既定で有効になります。<br /><br />次の表は、特定のデータベース互換性レベルおよびトレース フラグ 4199 を使った場合の動作をまとめたものです。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/974006)をご覧ください。<br /><br /><table border="1" frame="void" width="550"><tr valign="middle" align="center"><td>**データベース エンジン (DE) のバージョン**</td><td>**データベース互換レベル**</td><td>**TF 4199**</td><td>**すべての以前のデータベース互換レベルからの QO の変更**</td><td>**DE バージョンの RTM 後の QO の変更**</td></tr><tr valign="middle" align="center"><td rowspan="4">**13** ([!INCLUDE[ssSQL15](../../includes/sssql15-md.md)])</td><td rowspan="2">**100 ～ 120**</td><td>Off</td><td>無効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="2">**130** (既定値)</td><td>Off</td><td>有効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="6">**14** ([!INCLUDE[ssSQL17](../../includes/sssql17-md.md)])</td><td rowspan="2">**100 ～ 120**</td><td>Off</td><td>無効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="2">**130**</td><td>Off</td><td>有効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="2">**140** (既定値 <sup>1</sup>)</td><td>Off</td><td>有効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="6">**15** ([!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)]) と **12** ([!INCLUDE[ssSDSfull](../../includes/sssdsfull-md.md)])</td><td rowspan="2">**100 ～ 120**</td><td>Off</td><td>無効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="2">**130 から 140**</td><td>Off</td><td>有効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr><tr valign="middle" align="center"><td rowspan="2">**150** (既定値 <sup>2</sup>)</td><td>Off</td><td>有効</td><td>無効</td></tr><tr valign="middle" align="center"><td>On</td><td>有効</td><td>有効</td></tr></table><br /><sup>1</sup> **適用対象:** [!INCLUDE[ssSDSfull](../../includes/sssdsfull-md.md)]<br /><sup>2</sup> **適用対象:** [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)]<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降に、データベース レベルでこれを行う方法については、「[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)」の QUERY_OPTIMIZER_HOTFIXES オプションを参照してください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降では、クエリ レベルでこれを行うには、このトレース フラグの代わりに、USE HINT 'ENABLE_QUERY_OPTIMIZER_HOTFIXES' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**重要:** 間違った結果やアクセス違反エラーに対処するクエリ オプティマイザーの修正プログラムは、トレース フラグ 4199 では有効にされません。 これらの修正プログラムはオプションと見なされておらず、更新プログラム パッケージがインストールされると、既定で有効になります。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**4610**|キャッシュ エントリを格納するハッシュ テーブルのサイズを 8 倍に増やします。 トレース フラグ 4618 と共に使うと、TokenAndPermUserStore キャッシュ ストアのエントリの数が 8,192 に増えます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/959823)およびこちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/955644)を参照してください。<br /><br />**スコープ**: グローバルのみ|
|**4616**|アプリケーション ロールに対して、サーバー レベルのメタデータを参照可能にします。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では、アプリケーション ロールはサーバーレベルのプリンシパルに関連付けられていないため、所有するデータベース外のメタデータにはアクセスできません。 これは、以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の動作から変更されています。 このグローバル フラグを設定すると、新しい制限は無効になり、アプリケーション ロールはサーバーレベルのメタデータにアクセスできるようになります。<br /><br />**スコープ**: グローバルのみ|
|**4618**|TokenAndPermUserStore キャッシュ ストアのエントリの数を、1,024 に制限します。 トレース フラグ 4610 と共に使うと、TokenAndPermUserStore キャッシュ ストアのエントリの数が 8,192 に増えます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/959823)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**4621**|TokenAndPermUserStore キャッシュ ストア内のエントリの数を、ユーザーがレジストリ キーで指定した数に制限します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/959823)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**5004**|TDE 暗号化スキャンを一時停止し、暗号化スキャン ワーカーを何もしないで終了させます。 データベースは、暗号化中状態 (暗号化が進行中) のままになります。 再暗号化スキャンを再開するには、トレース フラグ 5004 を無効にして、ALTER DATABASE <データベース名> SET ENCRYPTION ON を実行します。 <br /><br />**スコープ**: グローバルのみ|
|**6498**|十分なメモリが使用可能な場合、複数の大きなクエリ コンパイルが大規模ゲートウェイにアクセスできるようにします。 このトレース フラグは、受信クエリをコンパイルするときのメモリ使用量の制御に使用できるため、同時発生した大きなクエリのコンパイルの待機を回避できます。 SQL Server ターゲット メモリの 80 パーセントが基準であり、25 ギガバイト (GB) のメモリごとに 1 つの大きなクエリ コンパイルが許可されます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3024815)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 および [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作はエンジンによって制御されるようになり、トレース フラグ 6498 に効力はありません。<br /><br />**スコープ**: グローバルのみ|
|**6527**|CLR 統合でメモリ不足例外が最初に発生した場合のメモリ ダンプの生成を無効にします。 既定では、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] は CLR でメモリ不足の例外が初めて発生したときに小さいメモリ ダンプを生成します。 トレース フラグの動作は次のとおりです。<br /><ul><li>スタートアップ トレース フラグとして使用される場合、メモリ ダンプは生成されません。 ただし、その他のトレース フラグが使用されると、メモリ ダンプが生成される場合があります。 <li>このトレース フラグが実行中のサーバーで有効になっている場合、メモリ ダンプはその時点から自動的には生成されなくなります。 ただし、CLR のメモリ不足例外のためにメモリ ダンプが既に生成されている場合は、このトレース フラグの効果はありません。</li></ul><br />**スコープ**: グローバルのみ|
|**6532**|[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] および [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] の空間データ型で、クエリ操作のパフォーマンスを向上できるようにします。 パフォーマンスがどの程度向上するかは、構成、クエリの種類、およびオブジェクトによって異なります。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3107399)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作はエンジンによって制御されるようになり、トレース フラグ 6532 に効力はありません。<br /><br />**スコープ**: グローバル、セッション|
|**6533**|[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] および [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] の空間データ型で、クエリ操作のパフォーマンスを向上できるようにします。 パフォーマンスがどの程度向上するかは、構成、クエリの種類、およびオブジェクトによって異なります。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3107399)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作はエンジンによって制御されるようになり、トレース フラグ 6533 に効力はありません。<br /><br />**スコープ**: グローバル、セッション| 
|**6534**|[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]、および [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] の空間データ型で、クエリ操作のパフォーマンスを向上できるようにします。 パフォーマンスがどの程度向上するかは、構成、クエリの種類、およびオブジェクトによって異なります。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3107399)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**7314**|有効桁数/小数点以下桁数が不明な NUMBER 値を、OLE DB プロバイダーで倍精度の値として強制的に処理します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3051993)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|  
|**7412**|軽量のクエリ実行統計プロファイリング インフラストラクチャを有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3170113)をご覧ください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降のビルドに適用されます。 [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 以降、軽量プロファイリングが既定で有効になるため、このトレース フラグには効果はありません。<br /><br />**スコープ**: グローバルのみ|
|**7471**|1 つのテーブルの異なる統計情報に対して複数の [UPDATE STATISTICS](../../t-sql/statements/update-statistics-transact-sql.md) を同時に実行できるようにします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3156157)をご覧ください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 以降のビルドに適用されます。<br /><br />**スコープ**: グローバルのみ|
|**7745**|データベースのシャットダウン時にクエリ ストアがデータをディスクにフラッシュしないように強制します。<br /><br />**注:** このトレースを使うと、以前にディスクにフラッシュされていないクエリ ストアのデータが、シャットダウン時に失われる可能性があります。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のシャットダウンでは、このトレース フラグの代わりに SHUTDOWN WITH NOWAIT コマンドを使って、即時シャットダウンを強制できます。<br /><br />**スコープ**: グローバルのみ|
|**7752**|クエリ ストアの非同期読み込みを有効にします。<br /><br />**注:** クエリ ストアの同期読み込み (データベース復旧時の既定の動作) に関連して、[!INCLUDE[ssNoVersion](../../includes/ssNoVersion-md.md)] で多数の QDS_LOADDB 待機が発生している場合は、このトレース フラグを使います。<br /><br />**注:** [!INCLUDE[sql-server-2019](../../includes/sssqlv15-md.md)] 以降では、この動作はエンジンによって制御されるようになり、トレース フラグ 7752 に効力はありません。<br /><br />**スコープ**: グローバルのみ|
|**7806**|[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]で専用管理者接続 (DAC) を有効にします。 既定では、[!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] で予約されている DAC リソースはありません。 詳細については、「 [データベース管理者用の診断接続](../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md)」を参照してください。<br /><br />**スコープ**: グローバルのみ|  
|**8011**|リソース モニターのリング バッファーを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**8012**|スケジューラのリング バッファーを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8015**|自動検出と NUMA の設定を無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2813214)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8018**|例外リング バッファーを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8019**|例外リング バッファーのスタック コレクションを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8020**|ワーキング セットの監視を無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8032**|キャッシュ制限パラメーターを [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] RTM の設定に戻します。これにより、一般に、より大きいキャッシュに対応できるようになります。 この設定は、頻繁に再利用されるキャッシュ エントリがキャッシュに収まらない場合や、サーバー構成オプション [[アドホック ワークロードの最適化]](../../database-engine/configure-windows/optimize-for-ad-hoc-workloads-server-configuration-option.md) でプラン キャッシュの問題を解決できない場合に使用します。<br /><br />**警告:** トレース フラグ 8032 を使用した場合、キャッシュが大きいために他のメモリ コンシューマー (バッファー プールなど) で利用できるメモリが少なくなると、パフォーマンスが低下することがあります。<br /><br />**スコープ**: グローバルのみ|   
|**8048**|NUMA パーティション分割のメモリ オブジェクトを CPU パーティション分割に変換します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2809338)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 および [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作は動的であり、エンジンによって制御されます。<br /><br />**スコープ**: グローバルのみ|  
|**8075**|64 ビット [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] または [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] でメモリ ページの割り当てエラーが発生したときに、[VAS](../../relational-databases/memory-management-architecture-guide.md#changes-to-memory-management-starting-2012-11x-gm) の断片化を減らします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3074434)をご覧ください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] RTM CU10、および [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 CU3 に適用されます。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作はエンジンによって制御されるようになり、トレース フラグ 8075 に効力はありません。<br /><br />**スコープ**: グローバルのみ|
|**8079**|[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 がハードウェア レイアウトを調査し、NUMA ノードあたり 8 個以上の CPU をレポートしたシステムにソフト NUMA を自動的に構成できるようにします。 自動ソフト NUMA の動作は、ハイパースレッド (HT/論理プロセッサ) に対応しています。 パーティション分割と追加ノードの作成により、リスナーの数の増加、スケーリング、およびネットワークと暗号化機能の向上により、バックグラウンド処理が拡張されます。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP2 に適用されます。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降では、この動作はエンジンによって制御されるようになり、トレース フラグ 8079 に効力はありません。<br /><br />**スコープ**: グローバルのみ| 
|**8207**|トランザクション レプリケーションと CDC に対して単一の更新を有効にします。 サブスクライバーへの更新は、DELETE と INSERT のペアとしてレプリケートできます。 これは、UPDATE トリガーの起動など、ビジネス ルールを満たさない場合があります。 トレース フラグ 8207 を使用すると、1 行 (シングルトンの更新) のみに影響する一意の列への更新は、DELETE または INSERT のペアとしてではなく、UPDATE としてレプリケートされます。 一意の制約が存在する列に更新が影響を与える場合、または更新が複数行に影響する場合、更新は引き続き DELETE または INSERT のペアとしてレプリケートされます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/302341)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8721**|統計の自動更新を実行するときに、エラー ログにレポートします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/195565)をご覧ください。<br /><br />**スコープ**: グローバルのみ|
|**8744**|入れ子になったループ演算子のプリフェッチを無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/920093)をご覧ください。<br /><br />**警告:** このトレース フラグの使用が不適切な場合、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] が入れ子になったループ演算子を含むプランを実行するときに、追加の物理読み取りが発生する可能性があります。<br /><br />**スコープ**: グローバル、セッション|
|**9024**|グローバル ログ プールのメモリ オブジェクトを、NUMA ノードのパーティション分割されたメモリ オブジェクトに変換します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/2809338)をご覧ください。<br /><br />**注:** [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] SP3 および [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] SP1 以降、この動作はエンジンによって制御されるようになり、トレース フラグ 9024 に効力はありません。<br /><br />**スコープ**: グローバルのみ|
|**9347**|Sort 演算子のバッチ モードを無効にします。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] では、多くの分析クエリのパフォーマンスが向上する新しいバッチ モード Sort 演算子が導入されています。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3172787)をご覧ください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**9349**|Top N Sort 演算子のバッチ モードを無効にします。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] では、多くの分析クエリのパフォーマンスが向上する新しいバッチ モード top sort 演算子が導入されています。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**9389**|バッチ モード演算子の追加の動的なメモリ許可を有効にします。 クエリが必要なすべてのメモリを取得できない場合、データが TempDB に書き込まれることで I/O が増加し、クエリのパフォーマンスに影響する可能性があります。 動的メモリ許可トレース フラグを有効にすると、バッチ モード演算子は追加メモリを要求でき、追加メモリが使用可能な場合に TempDB への書き込みが回避されます。 詳細については、「[メモリ管理アーキテクチャ ガイド](../../relational-databases/memory-management-architecture-guide.md#effects-of-min-memory-per-query)」の*クエリごとの最小メモリの効果*に関するセクションを参照してください。<br /><br />**スコープ**: グローバル、セッション| 
|**9398**|[適応型結合](../../relational-databases/performance/intelligent-query-processing.md#batch-mode-adaptive-joins)演算子を無効にします。この演算子は、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] で導入され、最初の入力のスキャンが終わるまで、[ハッシュ結合方法または入れ子になったループ結合](../../relational-databases/performance/joins.md)方法のどちらを選ぶかを、遅延することができます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/4099126)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**9453**|バッチ モード実行を無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/help/4016902)をご覧ください。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**9471**|[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 以降のバージョンのクエリ オプティマイザーカーディナリティ推定モデルにおいて、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] が単一テーブル フィルターの最小限の選択性を使ってプランを生成するようになります。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降では、クエリ レベルでこれを行うには、このトレース フラグを使う代わりに、USE HINT 'ASSUME_MIN_SELECTIVITY_FOR_FILTER_ESTIMATES' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**注:** このトレース フラグは CE バージョン 70 には適用されません。 トレース フラグ 4137 を代わりに使ってください。<br /><br />**スコープ**: グローバル、セッション、クエリ| 
|**9476**|[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] 以降のバージョンのクエリ オプティマイザーカーディナリティ推定モデルにおいて、既定の基本含有の推定の代わりに単純な含有の推定を使って、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] にプランを生成させます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3189675)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降では、クエリ レベルでこれを行うには、このトレース フラグを使う代わりに、USE HINT 'ASSUME_JOIN_PREDICATE_DEPENDS_ON_FILTERS' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**注:** このオプションは、運用環境に展開する前に十分にテストしてください。<br /><br />**スコープ**: グローバル、セッション、クエリ| 
|**9481**|データベースの互換性レベルに関係なく、クエリ オプティマイザーカーディナリティ推定モデルを [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 以前のバージョンに設定できます。 詳しくは、[Microsoft サポート技術情報](https://support.microsoft.com/kb/2801413)をご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] 以降にデータベース レベルでこれを行う方法については、「[ALTER DATABASE SCOPED CONFIGURATION &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)」の LEGACY_CARDINALITY_ESTIMATION オプションをご覧ください。<br /><br />[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP1 以降、クエリ レベルでこれを行うには、このトレース フラグの代わりに、USE HINT 'FORCE_LEGACY_CARDINALITY_ESTIMATION' [クエリ ヒント](../../t-sql/queries/hints-transact-sql-query.md)を追加します。<br /><br />**スコープ**: グローバル、セッション、クエリ|  
|**9485**|DBCC SHOW_STATISTICS に対する SELECT 権限を無効にします。<br /><br />**スコープ**: グローバルのみ|
|**9488**|<a name="9488"></a>[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 以降のバージョンのクエリ オプティマイザーカーディナリティ推定モデルを使う場合、テーブル値関数の固定の推定を既定値の 1 に設定します ([!INCLUDE[ssKilimanjaro](../../includes/ssKilimanjaro-md.md)] 以前のバージョンのクエリ オプティマイザーカーディナリティ推定モデルでの既定値に対応します)。<br /><br />**スコープ**: グローバル、セッション、クエリ|
|**9495**|INSERT...SELECT 操作の挿入の間に並列処理を無効にして、ユーザー テーブルと一時テーブルの両方に適用します。 詳しくは、[Microsoft サポート技術情報](https://support.microsoft.com/kb/3180087)をご覧ください。<br /><br />**スコープ**: グローバル、セッション| 
|**9567**|自動シード処理時の Always On 可用性グループのデータ ストリーム圧縮を有効にします。 自動シードの処理中、圧縮によって転送時間が大幅に短縮され、プロセッサの負荷が増大します。 詳しくは、「[AlwaysOn 可用性グループを自動的に初期化する](../../database-engine/availability-groups/windows/automatically-initialize-always-on-availability-group.md)」および「[可用性グループの圧縮の調整](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)」をご覧ください。<br /><br />**スコープ**: グローバル、セッション|
|**9571**|既定のデータベース パスに対する可用性グループの自動シード処理を無効にします。 詳細については、「[ディスク レイアウト](../../database-engine/availability-groups/windows/automatic-seeding-secondary-replicas.md)」を参照してください。<br /><br />**スコープ**: グローバル、セッション| 
|**9591**|Always On 可用性グループでのログ ブロック圧縮を無効にします。 ログ ブロック圧縮は、[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] および [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] の同期および非同期レプリカの両方で使われる既定の動作です。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] の圧縮は、非同期レプリカでのみ使われます。 <br /><br />**スコープ**: グローバル、セッション|
|**9592**|同期可用性グループのログ ストリーム圧縮を有効にします。 この機能は、圧縮によって待機時間が長くなるため、同期可用性グループでは既定で無効にされています。 詳細については、「 [Tune compression for availability group](../../database-engine/availability-groups/windows/tune-compression-for-availability-group.md)」(可用性グループの圧縮を調整する) を参照してください。<br /><br />**スコープ**: グローバル、セッション| 
|**9929**|インメモリ チェックポイント ファイルをそれぞれ 1 MB に削減します。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/3147012)をご覧ください。<br /><br />**スコープ**: グローバルのみ|  
|**9939**|[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] での DML 操作のターゲットになっていない場合、メモリ最適化テーブルまたはテーブル変数を参照する DML 操作で、メモリ最適化テーブルおよびテーブル変数の並列プランと並列スキャンを有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/4013877)をご覧ください。<br /><br />**注:** トレース フラグ 4199 が明示的に有効になっている場合、トレース フラグ 9939 は必要ありません。<br /><br />**スコープ**: グローバル、セッション、クエリ|   
|**10204**|列ストア インデックスの再編成中に、マージ/再圧縮を無効にします。 [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] では、列ストア インデックスを再編成するときに、圧縮された小さい行グループを圧縮された大きい行グループに自動的にマージし、多数の行が削除されている行グループを圧縮する、新しい機能があります。<br /><br />**注:** トレース フラグ 10204 は、メモリ最適化テーブル上に作成された列ストア インデックスには適用されません。<br /><br />**スコープ**: グローバル、セッション|   
|**10316**|既定のものに加えて、[内部メモリ最適化ステージング テンポラル テーブル](../../relational-databases/tables/system-versioned-temporal-tables-with-memory-optimized-tables.md)に追加のインデックスを作成できるようにします。 既定のインデックスで対応されていない列を含む特定のクエリ パターンがある場合は、新しいインデックスの追加を検討できます。<br /><br />**注:** メモリ最適化テーブルのシステムでバージョン管理されたテンポラル テーブルは、高いトランザクション スループットを提供するように設計されています。 追加のインデックスを作成すると、現在のテーブルの行を更新または削除する DML 操作にオーバーヘッドが発生する可能性があることに注意してください。 インデックスを追加するときは、テンポラル クエリのパフォーマンスと DML オーバーヘッドの増加の間の適切なバランスを見つける必要があります。<br /><br />**スコープ**: グローバル、セッション|
|**11023**|[UPDATE STATISTICS](../../t-sql/statements/update-statistics-transact-sql.md) ステートメントの一部としてサンプル レートが明示的に指定されていない場合、後続のすべての統計更新に対して、最後の永続化されたサンプル レートの使用を無効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/4039284)をご覧ください。<br /><br />**スコープ**: グローバル、セッション|    
|**11024**|任意のパーティションの変更数がローカルな[しきい値](../../relational-databases/statistics/statistics.md#AutoUpdateStats)を超えた場合の統計の自動更新のトリガーを有効にします。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/4041811)をご覧ください。<br /><br />**注:** このトレース フラグは [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU3 以降のビルドに適用されます。<br /><br />**スコープ**: グローバル、セッション| 
|**11047**|`query wait (s)` または Resource Governor `REQUEST_MEMORY_GRANT_TIMEOUT_SEC` 構成によって設定された既定のタイムアウトが、列ストア インデックスの構築操作に適用されます。 詳しくは、こちらの [Microsoft サポート技術情報](https://support.microsoft.com/kb/4480641)をご覧ください。<br /><br />**注:** このトレース フラグは、[!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] SP2 CU5、[!INCLUDE[ssSQL17](../../includes/sssql17-md.md)] CU14 以降のビルドに適用されます。<br /><br />**スコープ**: グローバル、セッション|  

  
## <a name="examples"></a>例  
 次の例では、DBCC TRACEON を使うことによって、サーバー レベルですべてのセッションにトレース フラグ 3205 を設定します。  
  
```sql  
DBCC TRACEON (3205,-1);  
```

特定のクエリに対し、トレース フラグ 4199 および 4137 によって制御される、プランに影響するすべての修正プログラムを有効にすることができます。
  
```sql
SELECT x FROM correlated WHERE f1 = 0 AND f2 = 1 OPTION (QUERYTRACEON 4199, QUERYTRACEON 4137)
``` 
 
## <a name="see-also"></a>参照  
[データ型 &#40;Transact-SQL&#41;](../../t-sql/data-types/data-types-transact-sql.md)  
[DBCC INPUTBUFFER &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-inputbuffer-transact-sql.md)  
[DBCC OUTPUTBUFFER &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-outputbuffer-transact-sql.md)  
[DBCC TRACEOFF &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-traceoff-transact-sql.md)  
[DBCC TRACEON &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-traceon-transact-sql.md)  
[DBCC TRACESTATUS &#40;Transact-SQL&#41;](../../t-sql/database-console-commands/dbcc-tracestatus-transact-sql.md)  
[EXECUTE &#40;Transact-SQL&#41;](../../t-sql/language-elements/execute-transact-sql.md)  
[SELECT &#40;Transact-SQL&#41;](../../t-sql/queries/select-transact-sql.md)  
[SET NOCOUNT &#40;Transact-SQL&#41;](../../t-sql/statements/set-nocount-transact-sql.md)  
[ALTER DATABASE SET のオプション &#40;Transact-SQL&#41;](../../t-sql/statements/alter-database-transact-sql-set-options.md)  
[ALTER DATABASE SCOPED CONFIGURATION (Transact-SQL)](../../t-sql/statements/alter-database-scoped-configuration-transact-sql.md)  
[クエリ ヒント (Transact-SQL)](../../t-sql/queries/hints-transact-sql-query.md)

