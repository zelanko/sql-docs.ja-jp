---
title: サーバー環境の作成とマップ |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- sql12.ssis.ssms.isenvprop.variables.f1
- sql12.ssis.ssms.iscreateenv.f1
- sql12.ssis.ssms.isenvprop.permissions.f1
- sql12.ssis.ssms.isenvprop.general.f1
ms.assetid: b1cbb697-713f-48e4-b234-b23724d87451
author: janinezhang
ms.author: janinez
ms.openlocfilehash: 4043075208fb4435fb777214733dad1d93113452
ms.sourcegitcommit: 9ee72c507ab447ac69014a7eea4e43523a0a3ec4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/17/2020
ms.locfileid: "84917284"
---
# <a name="create-and-map-a-server-environment"></a>サーバー環境の作成とマップ
  [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サーバーに配置したプロジェクトに含まれるパッケージに合わせたランタイム値を指定するためのサーバー環境を作成します。 特定のパッケージ、エントリ ポイント パッケージ、または特定のプロジェクト内のすべてのパッケージに対して、環境変数をパラメーターにマップできるようになります。 エントリ ポイント パッケージは、通常、子パッケージを実行する親パッケージです。  
  
> [!IMPORTANT]  
>  特定の実行で、パッケージは単一のサーバー環境に含まれている値だけで実行できます。  
  
 サーバー環境、環境参照、および環境変数の一覧のビューに対してクエリを実行できます。 環境、環境参照、および環境変数を追加、削除、変更するストアド プロシージャを呼び出すこともできます。 詳細については、「 [SSIS カタログ](catalog/ssis-catalog.md)」の「**サーバー環境、サーバー変数、およびサーバー環境の参照**」セクションを参照してください。  
  
### <a name="to-create-and-use-a-server-environment"></a>サーバー環境を作成して使用するには  
  
1.  で、 [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] オブジェクトエクスプローラーの [カタログ> **SSISDB** ] ノードを展開し、環境を作成するプロジェクトの [**環境**] フォルダーを探します。  
  
2.  **[環境]** フォルダーを右クリックし、 **[環境の作成]** をクリックします。  
  
3.  環境の名前、および必要に応じて説明を入力し、 **[OK]** をクリックします。  
  
4.  新しい環境を右クリックし、 **[プロパティ]** をクリックします。  
  
5.  **[変数]** ページで、次の手順を実行して変数を追加します。  
  
    1.  変数の **[型]** を選択します。 変数の名前は、変数にマップするプロジェクトパラメーターの名前と一致する必要**はありません**。  
  
    2.  必要に応じて、変数の **[説明]** を入力します。  
  
    3.  環境変数の **[値]** を入力します。  
  
         環境変数の名前のルールについては、「 **SSIS Catalog** 」の「 [環境変数](catalog/ssis-catalog.md)」を参照してください。  
  
    4.  **[機微]** チェック ボックスをオンまたはオフにして、変数に機微な値が含まれているかどうかを示します。  
  
         **[機微]** をオンにすると、変数値が **[値]** のフィールドに表示されません。  
  
         機微な値は、SSISDB カタログで暗号化されます。 暗号化の詳細については、「 [SSIS Catalog](catalog/ssis-catalog.md)」を参照してください。  
  
6.  **[権限]** ページで、次の手順を実行して、選択したユーザーに対して権限とロールを許可または拒否します。  
  
    1.  **[参照]** をクリックし、 **[すべてのプリンシパルを参照]** ダイアログ ボックスで 1 つ以上のユーザーおよびロールを選択します。  
  
    2.  **[ログインまたはロール]** 領域で、権限を許可または拒否するユーザーまたはロールを選択します。  
  
    3.  **[明示]** 領域で、各権限の横にある **[許可]** または **[拒否]** をクリックします。  
  
7.  環境のスクリプトを作成するには、 **[スクリプト]** をクリックします。 既定では、新しいクエリ エディター ウィンドウにスクリプトが表示されます。  
  
    > [!TIP]  
    >  スクリプトを作成した後、または変数を追加するなど環境プロパティを変更した後に **[スクリプト]** をクリックしてから、**[環境のプロパティ]** ダイアログ ボックスで **[OK]** をクリックする必要があります。 このようにしないと、スクリプトは生成されません。  
  
8.  **[OK]** をクリックして、変更を環境プロパティに保存します。  
  
9. オブジェクト エクスプローラーで **[SSISDB]** ノードの下の **[プロジェクト]** フォルダーを展開し、プロジェクトを右クリックして **[構成]** をクリックします。  
  
10. **[参照]** ページで、 **[追加]** をクリックして環境を追加し、 **[OK]** をクリックして参照を環境に保存します。  
  
11. プロジェクトをもう一度右クリックし、 **[構成]** をクリックします。  
  
12. 環境変数を、デザイン時にパッケージに追加したパラメーターにマップするか、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] プロジェクトをプロジェクト配置モデルに変換したときに生成されたパラメーターにマップするには、次の手順を実行します。  
  
    1.  **[パラメーター]** ページの **[パラメーター]** タブで、 **[値]** フィールドの横にある参照ボタンをクリックします。  
  
    2.  **[環境変数を使用する]** をクリックし、作成した環境変数を選択します。  
  
13. 環境変数を接続マネージャーのプロパティにマップするには、次の操作を行います。 パラメーターは、SSIS サーバー上で接続マネージャー プロパティ用に自動的に生成されます。  
  
    1.  **[パラメーター]** ページの **[接続マネージャー]** タブで、**[値]** フィールドの横にある [参照] ボタンをクリックします。  
  
    2.  **[環境変数を使用する]** をクリックし、作成した環境変数を選択します。  
  
14. **[OK]** をクリックして変更を保存します。  
  
  
