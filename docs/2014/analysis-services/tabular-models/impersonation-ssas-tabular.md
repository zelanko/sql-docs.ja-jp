---
title: 権限借用 (SSAS テーブル) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: fcc79e96-182a-45e9-8ae2-aeb440e9bedd
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 81e8f9ae90db3c7613ccb99039d70d9a28c5a113
ms.sourcegitcommit: 6fd8c1914de4c7ac24900fe388ecc7883c740077
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2020
ms.locfileid: "66067059"
---
# <a name="impersonation-ssas-tabular"></a>権限借用 (SSAS テーブル)
  このトピックでは、データのインポートおよび処理 (更新) のためにデータ ソースに接続するときに、ログオン資格情報が Analysis Services によってどのように使用されるかについて、テーブル モデルの作成者を対象に説明しています。  
  
 このトピックの内容は次のとおりです。  
  
-   [メリット](#bkmk_how_imper)  
  
-   [[オプション]](#bkmk_imp_info_options)  
  
-   [セキュリティ](#bkmk_impers_sec)  
  
-   [モデルをインポートする場合の権限借用](#bkmk_imp_newmodel)  
  
-   [権限借用の構成](#bkmk_conf_imp_info)  
  
##  <a name="benefits"></a><a name="bkmk_how_imper"></a>効果  
 *権限借用* は、Analysis Services などのサーバー アプリケーションがクライアント アプリケーションの ID を使用するための機能です。 Analysis Services はサービス アカウントを使用して実行されますが、データのインポートと処理に対するアクセス チェックを行うことができるように、サーバーがデータ ソースへの接続を確立するときに権限借用が使用されます。  
  
 権限借用に使用される資格情報は、現在ログオンしているユーザーの資格情報とは異なります。 モデル作成時には、特定のクライアント側の操作に、ログオンしているユーザーの資格情報が使用されます。  
  
 権限借用の資格情報がどのように指定およびセキュリティで保護されているか、および現在ログオンしているユーザーの資格情報と他の資格情報の両方が使用されているコンテキストの違いを理解しておくことが重要です。  
  
 **サーバー側の資格情報について**  
  
 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]では、テーブルのインポート ウィザードの **[権限借用情報]** ページを使用するか、 **[既存の接続]** ダイアログ ボックスで既存のデータ ソース接続を編集することによって、データ ソースごとの資格情報を指定します。  
  
 データがインポートまたは処理されるときに、 **[権限借用情報]** ページで指定された資格情報が、データ ソースへの接続とデータのフェッチのために使用されます。 これはクライアント アプリケーションのコンテキストで実行される *サーバー側* の操作であり、ワークスペース データベースをホストしている Analysis Services サーバーがデータ ソースに接続してデータをフェッチします。  
  
 モデルを Analysis Services サーバーに配置するときに、ワークスペース データベースがメモリ内にある場合、資格情報はモデルの配置先の Analysis Services サーバーに渡されます。 ユーザーの資格情報がディスク上に格納されることはありません。  
  
 配置されたモデルがデータ ソースのデータを処理するときは、インメモリ データベースに保存された権限借用の資格情報が、データ ソースへの接続とデータのフェッチに使用されます。 このプロセスは、モデル データベースを管理している Analysis Services サーバーによって処理されるため、これもサーバー側の操作です。  
  
 **クライアント側の資格情報について**  
  
 新しいモデルを作成したり、既存のモデルにデータ ソースを追加したりするときは、テーブルのインポート ウィザードを使用して、データ ソースに接続し、モデルにインポートするテーブルとビューを選択します。 テーブルのインポート ウィザードの **[テーブルとビューの選択]** ページでは、 **[プレビューとフィルター]** 機能を使用して、インポートするデータのサンプルを確認できます (最大 50 行まで)。 また、モデルに含める必要がないデータを除外するフィルターも指定できます。  
  
 同様に、既に作成済みの既存のモデルでは、 **[テーブルのプロパティの編集]** ダイアログ ボックスを使用して、テーブルにインポートするデータのプレビューおよびフィルター処理を行うことができます。 このプレビューおよびフィルター処理は、テーブルのインポート ウィザードの **[テーブルとビューの選択]** ページの **[プレビューとフィルター]** と同じ機能を使用しています。  
  
 **[プレビューとフィルター]** の機能と **[テーブルのプロパティ]** ダイアログ ボックス、 **[パーティション マネージャー]** ダイアログ ボックスは、インプロセスの *クライアント側* の操作です。つまり、この操作で実行される処理は、データ ソースに接続してデータ ソースからデータをフェッチする場合 (サーバー側の操作) とは異なります。 データのプレビューとフィルター処理で使用される資格情報は、現在ログオンしているユーザーの資格情報です。 クライアント側の操作では、常に現在のユーザーの Windows 資格情報を使用してデータソースに接続します。  
  
 このように、サーバー側の操作とクライアント側の操作で使用される資格情報が異なるため、 **[プレビューとフィルター]** 機能または **[テーブルのプロパティ]** ダイアログ ボックス (クライアント側の操作) の使用時にユーザーに対して表示される内容と、インポートまたは処理 (サーバー側の操作) の際にフェッチされるデータは、一致しないことがあります。 現在ログオンしているユーザーの資格情報が、指定されている権限借用の資格情報と異なる場合、データ ソースで必要な資格情報によっては、 **[プレビューとフィルター]** 機能または **[テーブルのプロパティ]** ダイアログ ボックスで表示されるデータと、インポートまたは処理中にフェッチされるデータが異なる場合があります。  
  
> [!IMPORTANT]  
>  モデルを作成するときは、現在ログオンしているユーザーの資格情報と、権限借用のために指定された資格情報に、データ ソースからデータをフェッチするための十分な権限があることを確認してください。  
  
##  <a name="options"></a><a name="bkmk_imp_info_options"></a>オプション  
 権限借用を構成するとき、または Analysis Services の既存のデータ ソース接続のプロパティを編集するときに、以下のオプションのいずれかを指定できます。  
  
|オプション|ImpersonationMode<sup>1</sup>|説明|  
|------------|-----------------------------------|-----------------|  
|**特定の Windows ユーザー名とパスワード** <sup>2</sup>|ImpersonateWindowsUserAccount|データ ソースのデータをインポートまたは処理する際に、モデルで Windows ユーザー アカウントが使用されるように指定します。 ユーザーアカウントのドメインと名前は、**\<ドメイン名>\\<ユーザーアカウント名\>** の形式で指定します。 テーブルのインポート ウィザードを使用して新しいモデルを作成する場合は、これが既定のオプションです。|  
|**サービス アカウント**|ImpersonateServiceAccount|モデルを管理している Analysis Services サービス インスタンスに関連付けられているセキュリティ資格情報をモデルで使用するように指定します。|  
  
 <sup>1</sup>ImpersonationMode は、データソースの[DataSourceImpersonationInfo 要素 &#40;ASSL&#41;](https://docs.microsoft.com/bi-reference/assl/properties/impersonationinfo-element-assl)プロパティの値を指定します。  
  
 <sup>2</sup>このオプションを使用すると、再起動のためにワークスペースデータベースがメモリから削除された場合、またはワークスペースの**保有期間**プロパティが**メモリからアンロード**または**ワークスペースから削除**され、モデルプロジェクトが閉じられた場合に、その後のセッションで、各データソースの資格情報を入力するように求められます。 同様に、配置されたモデル データベースがメモリから削除されると、各データ ソースの資格情報の入力を求められるようになります。  
  
##  <a name="security"></a><a name="bkmk_impers_sec"></a> セキュリティ  
 権限借用で使用される資格情報は、ワークスペース データベースまたは配置されたモデルを管理する Analysis Services サーバーに関連付けられている xVelocity メモリ内分析エンジン (VertiPaq™ エンジン) によって、メモリ内に保存されます。  資格情報がディスクに書き込まれることはありません。 モデルが配置されるときにワークスペース データベースがメモリ内にない場合、ユーザーはデータ ソースへの接続とデータのフェッチに使用する資格情報の入力を求められます。  
  
> [!NOTE]  
>  権限借用の資格情報には、Windows ユーザー アカウントとパスワードを指定することをお勧めします。 Windows ユーザー アカウントは、データ ソースに接続してデータを読み取るために必要な最低限の権限を使用するように構成できます。  
  
##  <a name="impersonation-when-importing-a-model"></a><a name="bkmk_imp_newmodel"></a>モデルのインポート時の権限借用  
 テーブル モデルの場合、アウト プロセスのデータ コレクションをサポートしているいくつかの異なる権限借用モードを使用できますが、PowerPivot では ImpersonateCurrentUser モードのみが使用されます。 PowerPivot は常にインプロセスで実行されるため、現在ログオンしているユーザーの資格情報を使用してデータ ソースに接続します。 テーブル モデルの場合、現在ログオンしているユーザーの資格情報は、テーブルのインポート ウィザードの **[プレビューとフィルター]** 機能と、 **[テーブルのプロパティ]** の表示にのみ使用されます。 権限借用の資格情報は、ワークスペース データベースに対するデータのインポートまたは処理、あるいは配置済みモデルに対するデータのインポートまたは処理で使用されます。  
  
 既存の PowerPivot ブックのインポートによって新しいモデルを作成する場合、既定では、モデル デザイナーによって、サービス アカウントを使用するように権限借用が構成されます (ImpersonateServiceAccount)。 PowerPivot からインポートしたモデルについては、権限借用の資格情報を Windows ユーザー アカウントに変更することをお勧めします。 PowerPivot ブックがインポートされ、新しいモデルがモデルデザイナーで作成された後、[**既存の接続**] ダイアログボックスを使用して資格情報を変更できます。  
  
 Analysis Services サーバー上の既存のモデルからインポートして新しいモデルを作成する場合、権限借用の資格情報は、既存のモデル データベースから、新しいモデル ワークスペース データベースに渡されます。 必要に応じて、 **[既存の接続]** ダイアログ ボックスを使用して、新しいモデルの資格情報を変更できます。  
  
##  <a name="configuring-impersonation"></a><a name="bkmk_conf_imp_info"></a>権限借用の構成  
 モデルが存在する場所とコンテキストに応じて、権限借用情報の構成方法が決まります。 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]で作成中のモデルでは、テーブルのインポート ウィザードの **[権限借用情報]** ページで、または **[既存の接続]** ダイアログ ボックスでデータ ソース接続を編集して、権限借用情報を構成できます。 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]で既存の接続を表示するには、 **[モデル]** メニューの **[既存の接続]** をクリックします。  
  
 Analysis Services サーバーに配置されるモデルでは、の [**データベース**の[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]プロパティ] ダイアログボックスの [**データソースの権限借用情報**] プロパティの省略記号ボタン ([...]) をクリックして、権限借用情報を構成できます。  
  
## <a name="see-also"></a>参照  
 [SSAS テーブル &#40;の DirectQuery モード&#41;](directquery-mode-ssas-tabular.md)   
 [SSAS 表形式のデータソース &#40;&#41;](../data-sources-ssas-tabular.md)   
 [テーブル モデル ソリューションの配置 &#40;SSAS テーブル&#41;](tabular-model-solution-deployment-ssas-tabular.md)  
  
  
